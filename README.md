# 路由器刷机工具

一款跨平台、极简操作的路由器刷机工具，无需手动配置IP，电脑连接路由器WiFi后即可自动识别设备，支持原厂固件备份、品牌型号自动识别、主流路由器刷机。

## 功能特性

- ✅ **自动设备发现**：基于UPnP/SSDP协议和ARP扫描，自动发现局域网内的路由器
- ✅ **品牌型号识别**：通过MAC地址、Web响应头等特征自动识别路由器品牌和型号
- ✅ **原厂固件备份**：支持Web管理接口备份、SSH/Telnet备份，安全可靠
- ✅ **可视化操作界面**：全图形界面，小白用户也能轻松操作
- ✅ **跨平台支持**：兼容Windows、macOS、Linux系统
- ✅ **操作日志记录**：详细记录所有操作，便于问题排查
- ✅ **适配库支持**：可扩展的设备特征库，支持更多路由器品牌

## 快速开始

### 方法1：使用启动脚本（推荐）

```bash
# 在项目根目录下执行
./run_app.sh
```

该脚本会自动：
1. 创建虚拟环境
2. 激活虚拟环境
3. 安装所有依赖
4. 启动应用程序

### 方法2：手动安装和运行

#### 1. 安装依赖

```bash
# 创建虚拟环境
python3 -m venv venv

# 激活虚拟环境
source venv/bin/activate  # macOS/Linux
venv\Scripts\activate  # Windows

# 安装依赖
pip install -r requirements.txt
```

#### 2. 运行应用程序

```bash
python3 src/ui/main_window.py
```

## 使用指南

### 1. 设备发现

1. 确保电脑已连接到路由器的WiFi网络
2. 打开应用程序，切换到「设备发现」标签页
3. 点击「搜索路由器」按钮
4. 等待搜索完成，在设备列表中选择要操作的路由器
5. 查看设备详情，包括IP地址、品牌、型号等信息

### 2. 固件备份

1. 在「设备发现」标签页中选择要备份的路由器
2. 切换到「固件备份」标签页
3. 确认路由器IP和登录凭据（默认用户名/密码：admin/admin）
4. 选择备份路径
5. 点击「开始备份」按钮
6. 等待备份完成，查看备份记录

### 3. 固件刷机

> 注意：刷机有风险，操作需谨慎！请确保已备份原厂固件。

1. 在「设备发现」标签页中选择要刷机的路由器
2. 切换到「固件刷机」标签页
3. 确认路由器IP和登录凭据
4. 点击「浏览」按钮选择固件文件（仅支持.bin格式）
5. 点击「验证固件」按钮检查固件兼容性
6. 点击「开始刷机」按钮，按照提示操作
7. 等待刷机完成，期间请勿断开电源或网络连接

## 项目结构

```
.
├── src/                  # 主源码目录
│   ├── ui/               # UI界面模块
│   │   └── main_window.py      # 主窗口界面
│   ├── business/         # 业务逻辑模块
│   │   ├── brand_recognition.py # 品牌识别
│   │   └── firmware_backup.py   # 固件备份
│   ├── communication/    # 通信模块
│   │   └── device_discovery.py  # 设备发现
│   ├── data/             # 数据层
│   │   └── db_model.py          # 数据库模型
│   └── utils/            # 工具类
├── requirements.txt       # 依赖列表
├── run_app.sh            # 启动脚本
└── README.md             # 项目说明
```

## 技术栈

- **前端界面**：PyQt6
- **后端核心**：Python
- **通信协议**：requests、paramiko、telnetlib、python-ssdp
- **设备扫描**：scapy、netifaces
- **固件处理**：hashlib、pycryptodome
- **数据库**：SQLite

## 兼容性

### 支持的路由器品牌

- ✅ TP-Link
- ✅ 华硕（ASUS）
- ✅ 小米（Xiaomi）
- ✅ 华为（Huawei）
- ✅ 腾达（Tenda）
- ✅ 水星（Mercury）
- ✅ 更多品牌持续添加中...

### 支持的系统

- ✅ Windows 10/11
- ✅ macOS 10.15+（Catalina及以上）
- ✅ Linux（Ubuntu 20.04+、Debian 10+等）

## 常见问题

### Q: 为什么搜索不到路由器？
A: 请检查：
1. 电脑是否已连接到路由器的WiFi网络
2. 路由器是否开启了Web管理界面（默认端口80）
3. 尝试手动输入路由器的管理地址

### Q: 备份固件失败怎么办？
A: 请检查：
1. 路由器的登录凭据是否正确
2. 路由器是否支持Web备份功能
3. 尝试使用SSH/Telnet方式备份
4. 查看操作日志获取详细错误信息

### Q: 刷机失败后如何恢复？
A: 
1. 大部分路由器都有恢复模式，可通过特定按键组合进入
2. 使用原厂恢复工具和备份的固件进行恢复
3. 查看操作日志，联系技术支持

## 安全提示

1. 刷机前请务必备份原厂固件
2. 仅使用官方或可信来源的固件
3. 刷机过程中请勿断开电源或网络连接
4. 定期更新工具的适配库
5. 操作完成后检查路由器功能是否正常

## 贡献

欢迎提交Issue和Pull Request，帮助完善这个工具！

### 提交设备支持

如果你的路由器未被识别，可通过以下方式提交支持：
1. 运行工具，在设备未识别时点击「提交设备信息」
2. 提供路由器的品牌、型号、管理地址等信息
3. 我们会尽快添加到适配库中

## 许可证

MIT License

## 更新日志

### v1.0.0（2025-12-28）
- 初始版本发布
- 实现设备自动发现功能
- 支持品牌型号自动识别
- 实现固件备份功能
- 提供可视化操作界面
- 支持跨平台运行

## 联系方式

如有问题或建议，欢迎通过以下方式联系：
- Email: support@routerflasher.com
- GitHub: https://github.com/routerflasher/router-flasher-tool

---

**免责声明**：本工具仅供学习和研究使用，刷机操作存在风险，使用本工具造成的任何损失由使用者自行承担。
